<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wolfronix Secure Vault</title>
    <meta name="description" content="End-to-end encrypted vault for identity documents, payment cards, files, and secure chat â€” powered by Wolfronix SDK">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- â”€â”€â”€ Header â”€â”€â”€ -->
    <header id="app-header">
        <div class="header-brand">
            <div class="logo">ğŸ›¡ï¸</div>
            <div>
                <h1>Wolfronix <span class="accent">Secure Vault</span></h1>
                <p class="tagline">Zero-knowledge encryption for your sensitive data</p>
            </div>
        </div>
        <div class="header-right">
            <div id="status-badge" class="badge badge-disconnected">Disconnected</div>
            <div id="user-badge" style="display:none" class="badge badge-user">
                <span id="userBadgeName">â€”</span>
                <button class="badge-logout" onclick="doLogout()" title="Logout">âœ•</button>
            </div>
        </div>
    </header>

    <!-- â”€â”€â”€ Config Bar â”€â”€â”€ -->
    <div id="config-bar">
        <div class="config-inner">
            <button id="connectBtn" onclick="initClient()">ğŸ”Œ Connect to Server</button>
        </div>
    </div>

    <!-- â”€â”€â”€ Navigation â”€â”€â”€ -->
    <nav id="main-nav">
        <button class="nav-btn active" data-tab="auth">ğŸ” Auth</button>
        <button class="nav-btn" data-tab="identity">ğŸªª Identity</button>
        <button class="nav-btn" data-tab="cards">ğŸ’³ Cards</button>
        <button class="nav-btn" data-tab="files">ğŸ“ Files</button>
        <button class="nav-btn" data-tab="chat">ğŸ’¬ Chat</button>
        <button class="nav-btn" data-tab="logs">ğŸ“‹ Logs</button>
    </nav>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• AUTH TAB â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="tab-auth" class="tab active">
        <div class="tab-header">
            <h2>ğŸ” Authentication</h2>
            <p>Zero-knowledge key management â€” your private key never leaves your device</p>
        </div>

        <div class="auth-grid">
            <div class="card glass">
                <div class="card-icon">ğŸ“</div>
                <h3>Register</h3>
                <p class="desc">Generate RSA keys client-side, wrap with your password</p>
                <div class="form-col">
                    <input type="email" id="regEmail" placeholder="Email address">
                    <input type="password" id="regPassword" placeholder="Password">
                    <button onclick="doRegister()" class="btn-primary btn-full">Create Account</button>
                </div>
            </div>

            <div class="card glass">
                <div class="card-icon">ğŸ”‘</div>
                <h3>Login</h3>
                <p class="desc">Fetch encrypted keys, unwrap locally with your password</p>
                <div class="form-col">
                    <input type="email" id="loginEmail" placeholder="Email address">
                    <input type="password" id="loginPassword" placeholder="Password">
                    <button onclick="doLogin()" class="btn-primary btn-full">Sign In</button>
                </div>
            </div>
        </div>

        <!-- Account Recovery -->
        <div class="card glass" style="margin-top:16px;">
            <div class="card-header-row">
                <h3>ğŸ”„ Account Recovery</h3>
                <span class="encrypted-badge">ğŸ”‘ BIP39</span>
            </div>
            <p class="desc">Forgot your password? Use your 24-word recovery phrase to regain access and set a new password.</p>
            <div class="form-col">
                <input type="email" id="recoverEmail" placeholder="Email address">
                <textarea id="recoverPhrase" rows="3" placeholder="Enter your 24-word recovery phrase..." style="font-family:monospace; font-size:13px;"></textarea>
                <input type="password" id="recoverNewPassword" placeholder="New password">
                <button onclick="doRecover()" class="btn-primary btn-full">ğŸ”„ Recover Account</button>
            </div>
        </div>

        <div class="card glass" id="user-info" style="display:none;">
            <div class="user-info-row">
                <div>
                    <div class="user-avatar" id="userAvatar">U</div>
                </div>
                <div class="user-details">
                    <h3 id="currentUser">â€”</h3>
                    <p id="keyStatus" class="desc">â€”</p>
                </div>
                <button class="btn-danger" onclick="doLogout()">Logout</button>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• IDENTITY VAULT TAB â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="tab-identity" class="tab">
        <div class="tab-header">
            <h2>ğŸªª Identity Vault</h2>
            <p>Store Aadhaar, PAN and identity documents with military-grade encryption</p>
        </div>

        <!-- Aadhaar Card Form -->
        <div class="card glass">
            <div class="card-header-row">
                <h3>ğŸ‡®ğŸ‡³ Aadhaar Card</h3>
                <span class="encrypted-badge">ğŸ”’ AES-256-GCM</span>
            </div>
            <div class="identity-form">
                <div class="form-grid-2">
                    <div class="form-group">
                        <label>Aadhaar Number</label>
                        <input type="text" id="aadhaarNumber" placeholder="XXXX XXXX XXXX" maxlength="14"
                               oninput="formatAadhaar(this)">
                    </div>
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="aadhaarName" placeholder="As printed on card">
                    </div>
                    <div class="form-group">
                        <label>Date of Birth</label>
                        <input type="date" id="aadhaarDob">
                    </div>
                    <div class="form-group">
                        <label>Gender</label>
                        <select id="aadhaarGender">
                            <option value="">Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Address</label>
                    <textarea id="aadhaarAddress" rows="2" placeholder="Full address as on Aadhaar"></textarea>
                </div>
                <div class="form-group">
                    <label>Upload Aadhaar Scan (optional)</label>
                    <input type="file" id="aadhaarFile" accept="image/*,.pdf">
                </div>
                <button onclick="saveAadhaar()" class="btn-primary">ğŸ”’ Encrypt & Save Aadhaar</button>
            </div>
        </div>

        <!-- PAN Card Form -->
        <div class="card glass">
            <div class="card-header-row">
                <h3>ğŸ›ï¸ PAN Card</h3>
                <span class="encrypted-badge">ğŸ”’ AES-256-GCM</span>
            </div>
            <div class="identity-form">
                <div class="form-grid-2">
                    <div class="form-group">
                        <label>PAN Number</label>
                        <input type="text" id="panNumber" placeholder="ABCDE1234F" maxlength="10"
                               oninput="this.value = this.value.toUpperCase()">
                    </div>
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="panName" placeholder="As printed on card">
                    </div>
                    <div class="form-group">
                        <label>Date of Birth</label>
                        <input type="date" id="panDob">
                    </div>
                    <div class="form-group">
                        <label>Father's Name</label>
                        <input type="text" id="panFather" placeholder="Father's name">
                    </div>
                </div>
                <div class="form-group">
                    <label>Upload PAN Scan (optional)</label>
                    <input type="file" id="panFile" accept="image/*,.pdf">
                </div>
                <button onclick="savePAN()" class="btn-primary">ğŸ”’ Encrypt & Save PAN</button>
            </div>
        </div>

        <!-- Stored Identity Documents -->
        <div class="card glass">
            <div class="card-header-row">
                <h3>ğŸ“‹ Stored Documents</h3>
                <button onclick="loadIdentityDocs()" class="btn-sm">Refresh</button>
            </div>
            <div id="identityDocsList" class="vault-list">
                <p class="placeholder">Click Refresh to load your encrypted documents</p>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CARD VAULT TAB â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="tab-cards" class="tab">
        <div class="tab-header">
            <h2>ğŸ’³ Card Vault</h2>
            <p>Securely store credit & debit card details with zero-knowledge encryption</p>
        </div>

        <!-- Add Card Form -->
        <div class="card glass">
            <div class="card-header-row">
                <h3>Add New Card</h3>
                <span class="encrypted-badge">ğŸ”’ Dual-Key Split</span>
            </div>

            <!-- Credit Card Visual -->
            <div class="credit-card-preview">
                <div class="cc-chip"></div>
                <div class="cc-number" id="ccPreviewNumber">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢</div>
                <div class="cc-bottom">
                    <div>
                        <div class="cc-label">CARDHOLDER</div>
                        <div class="cc-name" id="ccPreviewName">YOUR NAME</div>
                    </div>
                    <div>
                        <div class="cc-label">EXPIRES</div>
                        <div class="cc-expiry" id="ccPreviewExpiry">MM/YY</div>
                    </div>
                </div>
            </div>

            <div class="identity-form">
                <div class="form-grid-2">
                    <div class="form-group">
                        <label>Card Number</label>
                        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19"
                               oninput="formatCardNumber(this)">
                    </div>
                    <div class="form-group">
                        <label>Cardholder Name</label>
                        <input type="text" id="cardName" placeholder="Name on card"
                               oninput="updateCardPreview()">
                    </div>
                    <div class="form-group">
                        <label>Expiry Date</label>
                        <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5"
                               oninput="formatExpiry(this)">
                    </div>
                    <div class="form-group">
                        <label>CVV</label>
                        <input type="password" id="cardCvv" placeholder="â€¢â€¢â€¢" maxlength="4">
                    </div>
                </div>
                <div class="form-grid-2">
                    <div class="form-group">
                        <label>Card Type</label>
                        <select id="cardType">
                            <option value="credit">Credit Card</option>
                            <option value="debit">Debit Card</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Bank / Issuer</label>
                        <input type="text" id="cardBank" placeholder="e.g., HDFC, SBI, ICICI">
                    </div>
                </div>
                <button onclick="saveCard()" class="btn-primary">ğŸ”’ Encrypt & Save Card</button>
            </div>
        </div>

        <!-- Stored Cards -->
        <div class="card glass">
            <div class="card-header-row">
                <h3>ğŸ’³ Saved Cards</h3>
                <button onclick="loadCards()" class="btn-sm">Refresh</button>
            </div>
            <div id="cardsList" class="vault-list">
                <p class="placeholder">Click Refresh to load your encrypted cards</p>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FILE VAULT TAB â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="tab-files" class="tab">
        <div class="tab-header">
            <h2>ğŸ“ File Vault</h2>
            <p>Upload any file â€” encrypted with 4-layer security before storage</p>
        </div>

        <div class="card glass">
            <h3>Encrypt & Upload</h3>
            <p class="desc">AES-256-GCM â†’ Dual-Key Split â†’ RSA Wrap â†’ Stored on your database</p>
            <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()"
                 ondragover="event.preventDefault(); this.classList.add('dragover')"
                 ondragleave="this.classList.remove('dragover')"
                 ondrop="handleDrop(event)">
                <div class="upload-icon">ğŸ“¤</div>
                <div class="upload-text">Click or drag files here to encrypt</div>
                <div class="upload-sub" id="selectedFileName">Max recommended: 500 MB</div>
                <input type="file" id="fileInput" style="display:none" onchange="onFileSelected(this)">
            </div>
            <button onclick="doEncrypt()" class="btn-primary btn-full" id="encryptBtn" disabled>ğŸ”’ Encrypt & Upload</button>
            <div id="encryptResult" class="result-box" style="display:none;"></div>
        </div>

        <div class="card glass">
            <div class="card-header-row">
                <h3>ğŸ—‚ï¸ My Encrypted Files</h3>
                <button onclick="doListFiles()" class="btn-sm">Refresh</button>
            </div>
            <div id="fileList" class="vault-list">
                <p class="placeholder">Click Refresh to load files</p>
            </div>
        </div>

        <div class="card glass">
            <h3>Decrypt by ID</h3>
            <p class="desc">Zero-knowledge: RSA-encrypted key â†’ client-side decrypt â†’ view file</p>
            <div class="form-row">
                <input type="text" id="decryptFileId" placeholder="Enter File ID">
                <button onclick="doDecrypt()" class="btn-primary">Decrypt & View</button>
            </div>
        </div>

        <!-- File Preview Panel -->
        <div class="card glass" id="previewCard" style="display:none;">
            <div class="preview-header">
                <h3 id="previewTitle">Decrypted File</h3>
                <div class="preview-actions">
                    <button onclick="downloadPreview()" class="btn-sm">â¬‡ Download</button>
                    <button class="btn-close" onclick="closePreview()">âœ•</button>
                </div>
            </div>
            <div id="previewContent" class="preview-content"></div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SECURE CHAT TAB â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="tab-chat" class="tab">
        <div class="tab-header">
            <h2>ğŸ’¬ Secure Chat</h2>
            <p>End-to-end encrypted messaging â€” only you and the recipient can read</p>
        </div>

        <div class="chat-layout">
            <!-- Chat Sidebar -->
            <div class="chat-sidebar">
                <div class="chat-sidebar-header">
                    <h4>Start Conversation</h4>
                </div>
                <div class="form-group" style="padding: 12px;">
                    <input type="text" id="chatRecipientId" placeholder="Recipient email / user ID">
                    <button onclick="startChat()" class="btn-primary btn-full" style="margin-top:8px;">ğŸ” Open Chat</button>
                </div>
                <div class="chat-contacts" id="chatContacts">
                    <p class="placeholder" style="padding:12px; font-size:12px;">No conversations yet</p>
                </div>
            </div>

            <!-- Chat Main Area -->
            <div class="chat-main">
                <div class="chat-header" id="chatHeader">
                    <div class="chat-header-info">
                        <div class="chat-avatar" id="chatAvatar">?</div>
                        <div>
                            <div class="chat-recipient-name" id="chatRecipientName">Select a conversation</div>
                            <div class="chat-e2e-badge">ğŸ” E2E Encrypted Â· RSA-2048 + AES-256</div>
                        </div>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="chat-empty">
                        <div class="chat-empty-icon">ğŸ”’</div>
                        <div class="chat-empty-text">Messages are end-to-end encrypted.<br>Enter a user ID to start chatting.</div>
                    </div>
                </div>

                <div class="chat-input-bar" id="chatInputBar" style="display:none;">
                    <button onclick="document.getElementById('chatMediaInput').click()" class="btn-attach" title="Send media (image, video, document)">
                        ğŸ“
                    </button>
                    <input type="file" id="chatMediaInput" style="display:none" accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.txt" onchange="sendChatMedia(this)">
                    <input type="text" id="chatMessageInput" placeholder="Type a message..."
                           onkeydown="if(event.key==='Enter') sendChatMessage()">
                    <button onclick="sendChatMessage()" class="btn-send">
                        <span>Send ï¿½</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOGS TAB â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="tab-logs" class="tab">
        <div class="tab-header">
            <h2>ğŸ“‹ API Request Log</h2>
            <p>Monitor all SDK requests in real-time</p>
        </div>
        <div class="card glass">
            <div class="card-header-row">
                <h3>Request Log</h3>
                <button onclick="clearLogs()" class="btn-sm btn-danger">Clear</button>
            </div>
            <div id="logContainer" class="log-container"></div>
        </div>
    </section>

    <!-- â”€â”€â”€ Document Viewer Modal â”€â”€â”€ -->
    <div id="docViewerModal" class="modal" style="display:none;" onclick="if(event.target===this) closeDocViewer()">
        <div class="modal-content glass">
            <div class="modal-header">
                <h3 id="docViewerTitle">Document Details</h3>
                <button class="btn-close" onclick="closeDocViewer()">âœ•</button>
            </div>
            <div id="docViewerBody" class="modal-body"></div>
        </div>
    </div>

    <script src="dist/wolfronix-sdk.global.js"></script>
    <script src="app.js"></script>
</body>
</html>
